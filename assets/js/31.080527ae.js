(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{346:function(t,n,s){"use strict";s.r(n);var a=s(3),e=Object(a.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",[t._v("发出一个固定金额的红包，由若干个人来抢，需要满足哪些规则")]),t._v(" "),s("ol",[s("li",[t._v("所有人抢到金额之和等于红包金额，不能超过总金额，也不能少于0")]),t._v(" "),s("li",[t._v("每个人至少抢到一分钱")]),t._v(" "),s("li",[t._v("要保证所有人抢到金额的几率相等")])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1587563",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),s("OutboundLink")],1)]),t._v(" "),s("p",{staticStyle:{color:"red"}},[t._v("**前n-1个人采用随机数，最后一个人得剩下的钱**")]),s("p"),s("hr"),t._v(" "),s("h2",{attrs:{id:"二倍均值法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二倍均值法"}},[t._v("#")]),t._v(" 二倍均值法")]),t._v(" "),s("p",[t._v("剩余红包金额为M，剩余人数为N，那么有如下公式：")]),t._v(" "),s("p",[t._v("每次抢到的金额 = 随机区间 （0， M / N X 2）")]),t._v(" "),s("p",[t._v("这个公式，保证了每次随机金额的平均值是相等的，不会因为抢红包的先后顺序而造成不公平。")]),t._v(" "),s("p",[t._v("举个栗子：")]),t._v(" "),s("p",[t._v("假设有10个人，红包总额100元。")]),t._v(" "),s("p",[t._v("100/10X2 = 20, 所以第一个人的随机范围是（0，20 )，平均可以抢到10元。")]),t._v(" "),s("p",[t._v("假设第一个人随机到10元，那么剩余金额是100-10 = 90 元。")]),t._v(" "),s("p",[t._v("90/9X2 = 20, 所以第二个人的随机范围同样是（0，20 )，平均可以抢到10元。")]),t._v(" "),s("p",[t._v("假设第二个人随机到10元，那么剩余金额是90-10 = 80 元。")]),t._v(" "),s("p",[t._v("80/8X2 = 20, 所以第三个人的随机范围同样是（0，20 )，平均可以抢到10元。")]),t._v(" "),s("p",[t._v("以此类推，每一次随机范围的均值是相等的。")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 发红包算法，金额参数以分为单位\n    public List<Integer> divideRedPackage(Integer totalAmount, Integer totalPeopleNum) {\n        List<Integer> amountList = new ArrayList<Integer>();\n        Integer restAmount = totalAmount;\n        Integer restPeopleNum = totalPeopleNum;\n        Random random = new Random();\n        for (int i = 0; i < totalPeopleNum - 1; i++) {\n            // 随机范围：[1，剩余人均金额的两倍)，左闭右开\n            int amount = random.nextInt(restAmount / restPeopleNum * 2 - 1) + 1;\n            restAmount -= amount;\n            restPeopleNum--;\n            amountList.add(amount);\n        }\n        amountList.add(restAmount);\n        return amountList;\n    }\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("blockquote",[s("p",[s("em",[s("strong",[s("p",{staticStyle:{color:"red"}},[t._v("二倍均值法虽然公平，但是除了最后一次，每个人得到的红包都是小于平均值的2倍，并不是任意的随机")])])])])]),t._v(" "),s("h2",{attrs:{id:"线段切割法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#线段切割法"}},[t._v("#")]),t._v(" 线段切割法")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("List<Integer> line(int totalAmount, int totalNumber) {\n\t\t\t\n        List<Integer> list = new ArrayList();\n        if (totalAmount <= 0 || totalNumber <= 0) {\n            return list;\n        }\n        //用set可以去重\n        Set<Integer> set = new HashSet<>();\n        while (set.size() < totalNumber - 1) {\n            int random = ThreadLocalRandom.current().nextInt(1, totalAmount);\n            set.add(random);\n        }\n\t\t\n        Integer[] amounts = set.toArray(new Integer[0]);\n        //排序\n        Arrays.sort(amounts);\n        list.add(amounts[0]);\n\t\t //计算前后差值\n        for (int i = 1; i < amounts.length; i++) {\n            list.add(amounts[i] - amounts[i - 1]);\n        }\n        //最后一个值，为了不超过红包金额\n        list.add(totalAmount - amounts[amounts.length - 1]);\n        return list;\n    }\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("blockquote",[s("p",[s("em",[s("strong",[s("p",{staticStyle:{color:"red"}},[t._v("线段切割法，先生成 (n - 1) 个 1~总金额  间的随机数，然后按值大小进行排序，排序过后的集合前后元素间的差值既为该次红包金额")])])])])])])}),[],!1,null,null,null);n.default=e.exports}}]);
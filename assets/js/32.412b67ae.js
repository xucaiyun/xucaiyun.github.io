(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{366:function(s,a,t){"use strict";t.r(a);var e=t(3),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"firewall"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#firewall"}},[s._v("#")]),s._v(" firewall")]),s._v(" "),t("h2",{attrs:{id:"firewall-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#firewall-2"}},[s._v("#")]),s._v(" firewall")]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#firewall"}},[s._v("firewall")]),t("ul",[t("li",[t("a",{attrs:{href:"#安装-启动"}},[s._v("安装&启动")])]),t("li",[t("a",{attrs:{href:"#开启和关闭端口"}},[s._v("开启和关闭端口")])]),t("li",[t("a",{attrs:{href:"#选项"}},[s._v("选项")])])])]),t("li",[t("a",{attrs:{href:"#服务管理"}},[s._v("服务管理")]),t("ul",[t("li",[t("a",{attrs:{href:"#显示服务列表"}},[s._v("显示服务列表")])])])])])]),t("p"),s._v(" "),t("p",[t("strong",[s._v("环境：CentOS7")])]),s._v(" "),t("h3",{attrs:{id:"安装-启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-启动"}},[s._v("#")]),s._v(" "),t("strong",[s._v("安装&启动")])]),s._v(" "),t("p",[s._v("安装：yum install firewalld")]),s._v(" "),t("p",[s._v("启动： systemctl start firewalld")]),s._v(" "),t("p",[s._v("停止： systemctl stop firewalld")]),s._v(" "),t("p",[s._v("查看状态： systemctl status firewalld")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"开启和关闭端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启和关闭端口"}},[s._v("#")]),s._v(" 开启和关闭端口")]),s._v(" "),t("p",[s._v("重新载入：firewall-cmd --reload")]),s._v(" "),t("p",{staticStyle:{color:"red"}},[s._v("开放/关闭端口后需重新载入才可生效！")]),s._v(" "),t("p",[s._v("开放：firewall-cmd --zone=public --add-port=80/tcp --permanent")]),s._v(" "),t("p",[s._v("关闭：firewall-cmd --zone=public --remove-port=80/tcp --permanent")]),s._v(" "),t("p",[s._v("查看：firewall-cmd --zone=public --list-ports")]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("firewall-cmd --version  # 查看版本\nfirewall-cmd --help     # 查看帮助")]),s._v(" "),t("h3",{attrs:{id:"选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),t("blockquote",[t("p",[s._v("通用选项")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("-h, --help    # 显示帮助信息;\n-V, --version # 显示版本信息.（这个选项不能与其他选项组合);\n-q, --quiet   # 不打印状态消息；\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[s._v("状态选项")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("--state                # 显示firewalld的状态；\n--reload               # 不中断服务的重新加载；\n--complete-reload      # 中断所有连接的重新加载；\n--runtime-to-permanent # 将当前防火墙的规则永久保存；\n--check-config         # 检查配置正确性；\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("blockquote",[t("p",[s._v("日志选项")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("--get-log-denied         # 获取记录被拒绝的日志；\n--set-log-denied=<value> # 设置记录被拒绝的日志，只能为 'all','unicast','broadcast','multicast','off' 其中的一个；\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("blockquote",[t("p",[s._v("安装firewalld")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" firewalld firewall-config\n\nsystemctl start firewalld "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\nsystemctl stop firewalld  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" firewalld "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用自动启动")]),s._v("\nsystemctl disable firewalld "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁用自动启动")]),s._v("\nsystemctl status firewalld "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者 firewall-cmd --state 查看状态")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("你也可以关闭目前还不熟悉的FirewallD防火墙，而使用iptables，命令如下：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl stop firewalld\nsystemctl disable firewalld\nyum install iptables-services\nsystemctl start iptables\nsystemctl enable iptables\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("blockquote",[t("p",[s._v("配置firewalld")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --version  # 查看版本\nfirewall-cmd --help     # 查看帮助\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("blockquote",[t("p",[s._v("查看设置：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --state  # 显示状态\nfirewall-cmd --get-active-zones  # 查看区域信息\nfirewall-cmd --get-zone-of-interface=eth0  # 查看指定接口所属区域\nfirewall-cmd --panic-on  # 拒绝所有包\nfirewall-cmd --panic-off  # 取消拒绝状态\nfirewall-cmd --query-panic  # 查看是否拒绝\nfirewall-cmd --reload # 更新防火墙规则\nfirewall-cmd --complete-reload\n两者的区别就是第一个无需断开连接，就是firewalld特性之一动态添加规则，第二个需要断开连接，类似重启服务\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("blockquote",[t("p",[s._v("将接口添加到区域，默认接口都在public")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --zone=public --add-interface=eth0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("永久生效再加上 --permanent 然后reload防火墙")]),s._v(" "),t("blockquote",[t("p",[s._v("设置默认接口区域，立即生效无需重启")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --set-default-zone=public\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("查看所有打开的端口：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --zone=dmz --list-ports\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("加入一个端口到区域：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --zone=dmz --add-port=8080/tcp\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("打开一个服务，类似于将端口可视化，服务需要在配置文件中添加，/etc/firewalld 目录下有services文件夹，这个不详细说了，详情参考文档")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --zone=work --add-service=smtp\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("移除服务")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --zone=work --remove-service=smtp\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("显示支持的区域列表")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --get-zones\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("设置为家庭区域")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --set-default-zone=home\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("查看当前区域")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --get-active-zones\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("设置当前区域的接口")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --get-zone-of-interface=enp03s\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("显示所有公共区域（public）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --zone=public --list-all\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("临时修改网络接口（enp0s3）为内部区域（internal）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --zone=internal --change-interface=enp03s\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("永久修改网络接口enp03s为内部区域（internal）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --permanent --zone=internal --change-interface=enp03s\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"服务管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务管理"}},[s._v("#")]),s._v(" 服务管理")]),s._v(" "),t("h3",{attrs:{id:"显示服务列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#显示服务列表"}},[s._v("#")]),s._v(" 显示服务列表")]),s._v(" "),t("p",[s._v("Amanda, FTP, Samba和TFTP等最重要的服务已经被FirewallD提供相应的服务，可以使用如下命令查看：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("firewall-cmd --get-services\n\n允许SSH服务通过\n\nfirewall-cmd --new-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ssh\n禁止SSH服务通过\n\nfirewall-cmd --delete-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ssh\n打开TCP的8080端口\n\nfirewall-cmd --enable "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp\n临时允许Samba服务通过600秒\n\nfirewall-cmd --enable "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("service")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("samba --timeout"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v("\n显示当前服务\n\nfirewall-cmd --list-services\n添加HTTP服务到内部区域（internal）\n\nfirewall-cmd --permanent --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("internal --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http\nfirewall-cmd --reload     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在不改变状态的条件下重新加载防火墙")]),s._v("\n端口管理\n打开443/TCP端口\n\nfirewall-cmd --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/tcp\n永久打开3690/TCP端口\n\nfirewall-cmd --permanent --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3690")]),s._v("/tcp\n永久打开端口好像需要reload一下，临时打开好像不用，如果用了reload临时打开的端口就失效了\n\n其它服务也可能是这样的，这个没有测试\n\nfirewall-cmd --reload\n查看防火墙，添加的端口也可以看到\n\nfirewall-cmd --list-all\n直接模式\nFirewallD包括一种直接模式，使用它可以完成一些工作，例如打开TCP协议的9999端口\n\nfirewall-cmd --direct -add-rule ipv4 filter INPUT "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -p tcp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v(" -j ACCEPT\nfirewall-cmd --reload\n自定义服务管理\n选项\n（末尾带有 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 的话表示该选项除了与（--permanent）之外，不能与其他选项一同使用！）\n\n--new-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 新建一个自定义服务 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--new-service-from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("文件名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                      从文件中读取配置用以新建一个自定义服务 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--delete-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      删除一个已存在的服务 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--load-service-defaults"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      Load icmptype default settings "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--info-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      显示该服务的相关信息\n--path-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      显示该服务的文件的相关路径 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --set-description"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("描述"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      给该服务设置描述信息 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --get-description\n                      显示该服务的描述信息 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --set-short"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("描述"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      给该服务设置一个简短的描述 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --get-short\n                      显示该服务的简短描述 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      给该服务添加一个新的端口"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("端口段"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --remove-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      从该服务上移除一个端口"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("端口段"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --query-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      查询该服务是否添加了某个端口"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("端口段"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --get-ports\n                      显示该服务添加的所有端口 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --add-protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      为该服务添加一个协议 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --remove-protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      从该服务上移除一个协议 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --query-protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      查询该服务是否添加了某个协议 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --get-protocols\n                      显示该服务添加的所有协议 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --add-source-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      添加新的源端口"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("端口段"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("到该服务 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --remove-source-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      从该服务中删除源端口"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("端口段"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --query-source-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      查询该服务是否添加了某个源端口"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("端口段"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --get-source-ports\n                      显示该服务所有源端口 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --add-module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      为该服务添加一个模块 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --remove-module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      为该服务移除一个模块 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --query-module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      查询该服务是否添加了某个模块 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --get-modules\n                      显示该服务添加的所有模块 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --set-destination"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ipv"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mask"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                      Set destination "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" ipv to address "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --remove-destination"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ipv"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n                      Disable destination "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" ipv i "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --query-destination"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ipv"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mask"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                      Return whether destination ipv is "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n--service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("服务名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --get-destinations\n                      List destinations "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("P only"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n控制端口 / 服务\n可以通过两种方式控制端口的开放，一种是指定端口号另一种是指定服务名。虽然开放 http 服务就是开放了 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" 端口，但是还是不能通过端口号来关闭，也就是说通过指定服务名开放的就要通过指定服务名关闭；通过指定端口号开放的就要通过指定端口号关闭。还有一个要注意的就是指定端口的时候一定要指定是什么协议，tcp 还是 udp。知道这个之后以后就不用每次先关防火墙了，可以让防火墙真正的生效。\n\nfirewall-cmd --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开放mysql端口")]),s._v("\nfirewall-cmd --remove-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 阻止http端口")]),s._v("\nfirewall-cmd --list-services            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看开放的服务")]),s._v("\nfirewall-cmd --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开放通过tcp访问3306")]),s._v("\nfirewall-cmd --remove-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("80tcp        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 阻止通过tcp访问3306")]),s._v("\nfirewall-cmd --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("233")]),s._v("/udp         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开放通过udp访问233")]),s._v("\nfirewall-cmd --list-ports               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看开放的端口")]),s._v("\n伪装 IP\nfirewall-cmd --query-masquerade "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查是否允许伪装IP")]),s._v("\nfirewall-cmd --add-masquerade   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许防火墙伪装IP")]),s._v("\nfirewall-cmd --remove-masquerade"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁止防火墙伪装IP")]),s._v("\n端口转发\n端口转发可以将指定地址访问指定的端口时，将流量转发至指定地址的指定端口。转发的目的如果不指定 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" 的话就默认为本机，如果指定了 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" 却没指定端口，则默认使用来源端口。 如果配置好端口转发之后不能用，可以检查下面两个问题：\n\n比如我将 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" 端口转发至 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(" 端口，首先检查本地的 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" 端口和目标的 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(" 端口是否开放监听了\n其次检查是否允许伪装 IP，没允许的话要开启伪装 IP\n\nfirewall-cmd --add-forward-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":proto"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tcp:toport"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将80端口的流量转发至8080")]),s._v("\nfirewall-cmd --add-forward-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":proto"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tcp:toaddr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将80端口的流量转发至192.168.0.1")]),s._v("\nfirewall-cmd --add-forward-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":proto"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tcp:toaddr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.1:toport"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将80端口的流量转发至192.168.0.1的8080端口")]),s._v("\n当我们想把某个端口隐藏起来的时候，就可以在防火墙上阻止那个端口访问，然后再开一个不规则的端口，之后配置防火墙的端口转发，将流量转发过去。\n端口转发还可以做流量分发，一个防火墙拖着好多台运行着不同服务的机器，然后用防火墙将不同端口的流量转发至不同机器。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br"),t("span",{staticClass:"line-number"},[s._v("107")]),t("br"),t("span",{staticClass:"line-number"},[s._v("108")]),t("br"),t("span",{staticClass:"line-number"},[s._v("109")]),t("br"),t("span",{staticClass:"line-number"},[s._v("110")]),t("br"),t("span",{staticClass:"line-number"},[s._v("111")]),t("br"),t("span",{staticClass:"line-number"},[s._v("112")]),t("br"),t("span",{staticClass:"line-number"},[s._v("113")]),t("br"),t("span",{staticClass:"line-number"},[s._v("114")]),t("br"),t("span",{staticClass:"line-number"},[s._v("115")]),t("br"),t("span",{staticClass:"line-number"},[s._v("116")]),t("br"),t("span",{staticClass:"line-number"},[s._v("117")]),t("br"),t("span",{staticClass:"line-number"},[s._v("118")]),t("br"),t("span",{staticClass:"line-number"},[s._v("119")]),t("br"),t("span",{staticClass:"line-number"},[s._v("120")]),t("br"),t("span",{staticClass:"line-number"},[s._v("121")]),t("br"),t("span",{staticClass:"line-number"},[s._v("122")]),t("br"),t("span",{staticClass:"line-number"},[s._v("123")]),t("br"),t("span",{staticClass:"line-number"},[s._v("124")]),t("br"),t("span",{staticClass:"line-number"},[s._v("125")]),t("br"),t("span",{staticClass:"line-number"},[s._v("126")]),t("br"),t("span",{staticClass:"line-number"},[s._v("127")]),t("br"),t("span",{staticClass:"line-number"},[s._v("128")]),t("br"),t("span",{staticClass:"line-number"},[s._v("129")]),t("br"),t("span",{staticClass:"line-number"},[s._v("130")]),t("br"),t("span",{staticClass:"line-number"},[s._v("131")]),t("br"),t("span",{staticClass:"line-number"},[s._v("132")]),t("br"),t("span",{staticClass:"line-number"},[s._v("133")]),t("br"),t("span",{staticClass:"line-number"},[s._v("134")]),t("br"),t("span",{staticClass:"line-number"},[s._v("135")]),t("br"),t("span",{staticClass:"line-number"},[s._v("136")]),t("br"),t("span",{staticClass:"line-number"},[s._v("137")]),t("br"),t("span",{staticClass:"line-number"},[s._v("138")]),t("br"),t("span",{staticClass:"line-number"},[s._v("139")]),t("br"),t("span",{staticClass:"line-number"},[s._v("140")]),t("br"),t("span",{staticClass:"line-number"},[s._v("141")]),t("br"),t("span",{staticClass:"line-number"},[s._v("142")]),t("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);